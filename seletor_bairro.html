<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Gráfico interativo com selector</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
</head>
<body>

<h3 style="margin-left: 350px;">Selecione o Bairro:</h3>
<select style="margin-left: 390px;" id="bairroSelect" onchange="atualizarGrafico()">
  <option value="Centro">Centro</option>
  <option value="Malvinas">Malvinas</option>
  <option value="Catolé">Catolé</option>
</select>

<div id="grafico" style="width:900px; height:600px;"></div>

<script>

const days = ['Segunda', 'Terça', 'Quarta',
    'Quinta', 'Sexta', 'Sábado', 'Domingo'];

const hours = [
  '0h', '1h', '2h', '3h', '4h', '5h', '6h', '7h', '8h', '9h', '10h', '11h',
  '12h', '13h', '14h', '15h', '16h', '17h', '18h', '19h', '20h', '21h', '22h', '23h'
];

const dadosPorBairro = {
  "Centro": [
    [0,0,202],[0,1,129],[0,2,89],[0,3,67],[0,4,56],[0,5,35],[0,6,43],[0,7,56],[0,8,71],[0,9,87],[0,10,113],[0,11,107],[0,12,112],[0,13,112],[0,14,110],[0,15,112],[0,16,105],[0,17,131],[0,18,138],[0,19,155],[0,20,187],[0,21,182],[0,22,204],[0,23,154],
  [1,0,104],[1,1,86],[1,2,63],[1,3,45],[1,4,35],[1,5,27],[1,6,30],[1,7,44],[1,8,68],[1,9,70],[1,10,91],[1,11,115],[1,12,90],[1,13,85],[1,14,90],[1,15,89],[1,16,100],[1,17,107],[1,18,124],[1,19,140],[1,20,150],[1,21,174],[1,22,192],[1,23,160],
  [2,0,119],[2,1,81],[2,2,67],[2,3,51],[2,4,41],[2,5,27],[2,6,36],[2,7,51],[2,8,65],[2,9,80],[2,10,96],[2,11,105],[2,12,117],[2,13,100],[2,14,75],[2,15,91],[2,16,119],[2,17,128],[2,18,139],[2,19,136],[2,20,170],[2,21,165],[2,22,215],[2,23,180],
  [3,0,116],[3,1,100],[3,2,69],[3,3,43],[3,4,33],[3,5,26],[3,6,35],[3,7,47],[3,8,62],[3,9,96],[3,10,96],[3,11,129],[3,12,92],[3,13,94],[3,14,100],[3,15,92],[3,16,117],[3,17,122],[3,18,126],[3,19,155],[3,20,156],[3,21,182],[3,22,195],[3,23,197],
  [4,0,125],[4,1,104],[4,2,75],[4,3,57],[4,4,40],[4,5,28],[4,6,31],[4,7,56],[4,8,67],[4,9,86],[4,10,102],[4,11,106],[4,12,90],[4,13,90],[4,14,109],[4,15,101],[4,16,112],[4,17,131],[4,18,133],[4,19,191],[4,20,202],[4,21,243],[4,22,290],[4,23,307],
  [5,0,246],[5,1,197],[5,2,140],[5,3,103],[5,4,65],[5,5,54],[5,6,45],[5,7,45],[5,8,63],[5,9,96],[5,10,111],[5,11,118],[5,12,121],[5,13,106],[5,14,115],[5,15,134],[5,16,161],[5,17,180],[5,18,218],[5,19,257],[5,20,290],[5,21,335],[5,22,470],[5,23,495],
  [6,0,362],[6,1,277],[6,2,203],[6,3,149],[6,4,94],[6,5,65],[6,6,60],[6,7,55],[6,8,58],[6,9,79],[6,10,123],[6,11,114],[6,12,120],[6,13,117],[6,14,147],[6,15,165],[6,16,196],[6,17,229],[6,18,239],[6,19,270],[6,20,308],[6,21,357],[6,22,385],[6,23,317]
], "Malvinas": [[0,0,135],[0,1,86],[0,2,59],[0,3,44],[0,4,37],[0,5,23],[0,6,28],[0,7,37],[0,8,47],[0,9,58],[0,10,75],[0,11,71],[0,12,75],[0,13,75],[0,14,73],[0,15,74],[0,16,70],[0,17,87],[0,18,92],[0,19,103],[0,20,125],[0,21,121],[0,22,136],[0,23,103],
  [1,0,69],[1,1,57],[1,2,42],[1,3,30],[1,4,23],[1,5,18],[1,6,20],[1,7,29],[1,8,45],[1,9,46],[1,10,60],[1,11,77],[1,12,60],[1,13,56],[1,14,60],[1,15,59],[1,16,67],[1,17,71],[1,18,83],[1,19,93],[1,20,100],[1,21,116],[1,22,128],[1,23,107],
  [2,0,79],[2,1,54],[2,2,44],[2,3,34],[2,4,27],[2,5,18],[2,6,24],[2,7,34],[2,8,43],[2,9,53],[2,10,64],[2,11,70],[2,12,78],[2,13,66],[2,14,50],[2,15,60],[2,16,79],[2,17,85],[2,18,92],[2,19,90],[2,20,113],[2,21,110],[2,22,143],[2,23,120],
  [3,0,77],[3,1,66],[3,2,46],[3,3,28],[3,4,22],[3,5,17],[3,6,23],[3,7,31],[3,8,41],[3,9,64],[3,10,64],[3,11,86],[3,12,61],[3,13,63],[3,14,66],[3,15,61],[3,16,78],[3,17,81],[3,18,84],[3,19,103],[3,20,104],[3,21,121],[3,22,130],[3,23,131],
  [4,0,83],[4,1,69],[4,2,50],[4,3,38],[4,4,27],[4,5,19],[4,6,20],[4,7,37],[4,8,45],[4,9,57],[4,10,68],[4,11,71],[4,12,60],[4,13,60],[4,14,72],[4,15,67],[4,16,74],[4,17,87],[4,18,89],[4,19,127],[4,20,135],[4,21,162],[4,22,193],[4,23,204],
  [5,0,164],[5,1,131],[5,2,93],[5,3,69],[5,4,43],[5,5,36],[5,6,30],[5,7,30],[5,8,42],[5,9,64],[5,10,74],[5,11,79],[5,12,80],[5,13,71],[5,14,76],[5,15,89],[5,16,107],[5,17,120],[5,18,145],[5,19,171],[5,20,193],[5,21,223],[5,22,313],[5,23,330],
  [6,0,241],[6,1,184],[6,2,135],[6,3,99],[6,4,62],[6,5,43],[6,6,40],[6,7,37],[6,8,39],[6,9,53],[6,10,82],[6,11,76],[6,12,80],[6,13,78],[6,14,98],[6,15,110],[6,16,131],[6,17,153],[6,18,159],[6,19,180],[6,20,205],[6,21,238],[6,22,256],[6,23,211]
], "Catolé" : [[0,0,135],[0,1,86],[0,2,59],[0,3,44],[0,4,37],[0,5,23],[0,6,28],[0,7,37],[0,8,47],[0,9,58],[0,10,75],[0,11,71],[0,12,75],[0,13,75],[0,14,73],[0,15,74],[0,16,70],[0,17,87],[0,18,92],[0,19,103],[0,20,125],[0,21,121],[0,22,136],[0,23,103],
  [1,0,69],[1,1,57],[1,2,42],[1,3,30],[1,4,23],[1,5,18],[1,6,20],[1,7,29],[1,8,45],[1,9,46],[1,10,60],[1,11,77],[1,12,60],[1,13,56],[1,14,60],[1,15,59],[1,16,67],[1,17,71],[1,18,83],[1,19,93],[1,20,100],[1,21,116],[1,22,128],[1,23,107],
  [2,0,79],[2,1,54],[2,2,44],[2,3,34],[2,4,27],[2,5,18],[2,6,24],[2,7,34],[2,8,43],[2,9,53],[2,10,64],[2,11,70],[2,12,78],[2,13,66],[2,14,50],[2,15,60],[2,16,79],[2,17,85],[2,18,92],[2,19,90],[2,20,113],[2,21,110],[2,22,143],[2,23,120],
  [3,0,77],[3,1,66],[3,2,46],[3,3,28],[3,4,22],[3,5,17],[3,6,23],[3,7,31],[3,8,41],[3,9,64],[3,10,64],[3,11,86],[3,12,61],[3,13,63],[3,14,66],[3,15,61],[3,16,78],[3,17,81],[3,18,84],[3,19,103],[3,20,104],[3,21,121],[3,22,130],[3,23,131],
  [4,0,83],[4,1,69],[4,2,50],[4,3,38],[4,4,27],[4,5,19],[4,6,20],[4,7,37],[4,8,45],[4,9,57],[4,10,68],[4,11,71],[4,12,60],[4,13,60],[4,14,72],[4,15,67],[4,16,74],[4,17,87],[4,18,89],[4,19,127],[4,20,135],[4,21,162],[4,22,193],[4,23,204],
  [5,0,164],[5,1,131],[5,2,93],[5,3,69],[5,4,43],[5,5,36],[5,6,30],[5,7,30],[5,8,42],[5,9,64],[5,10,74],[5,11,79],[5,12,80],[5,13,71],[5,14,76],[5,15,89],[5,16,107],[5,17,120],[5,18,145],[5,19,171],[5,20,193],[5,21,223],[5,22,313],[5,23,330],
  [6,0,241],[6,1,184],[6,2,135],[6,3,99],[6,4,62],[6,5,43],[6,6,40],[6,7,37],[6,8,39],[6,9,53],[6,10,82],[6,11,76],[6,12,80],[6,13,78],[6,14,98],[6,15,110],[6,16,131],[6,17,153],[6,18,159],[6,19,180],[6,20,205],[6,21,238],[6,22,256],[6,23,211]
]
};

// Inicializa o gráfico
var chart = echarts.init(document.getElementById('grafico'));

// Função para atualizar o gráfico
function atualizarGrafico() {
  var bairroSelecionado = document.getElementById("bairroSelect").value;
  var dados = dadosPorBairro[bairroSelecionado] || [];

  var option = {
    title: {
      text: 'Mapa de calor em relação ao dia da semana e hora da ocorrência.',
      left: 'center'
    },
    tooltip: {
      position: 'top'
    },
    grid: {
      height: '60%',
      top: '10%'
    },
    xAxis: {
      type: 'category',
      data: hours,
      splitArea: {
        show: true
      }
    },
    yAxis: {
      type: 'category',
      data: days,
      splitArea: {
        show: true
      }
    },
    visualMap: {
      min: 0,
      max: 500,
      calculable: true,
      orient: 'horizontal',
      left: 'center',
      bottom: '5%',
      inRange: {
        color: ['#ffffcc', '#c2e699', '#78c679', '#31a354', '#006837']
      }
    },
    series: [
      {
        name: 'Hora _ Quantidade',
        type: 'heatmap',
        data: dados.map(item => [item[1], item[0], item[2] || '-']),
        label: {
          show: true
        },
        emphasis: {
          itemStyle: {
            shadowBlur: 10,
            shadowColor: 'rgba(0, 0, 0, 0.5)'
          }
        }
      }
    ]
  };

  chart.setOption(option);
}

atualizarGrafico();
</script>

</body>
</html>